
<form #resourceForm="ngForm" (ngSubmit)="sendForm($event)">
    <div class="item-form" [formGroup]="dataform">
        <div formGroupName="data" >
            <aside class="item-form-general" >
                <div class="item-form-group media">
                    
                    <div class="fields column">
                        <div class="img-box">
                            <img [src]="image" (error)="imgError()" #imgPreview />
                            <div class="img-input">
                                <input type="file" id="cover" (change)="handleImageInput($event.target.files)">
                                <label for="cover"><fa-icon [icon]="faUpload"></fa-icon></label>
                                <button *ngIf="image != defaultImage" (click)="deleteImage($event)"><fa-icon [icon]="faTrash"></fa-icon></button>
                            </div>
                        </div>
                        <div class="field-item">
                            <label for="files">SELECT TYPE</label>
                            <select [value]="currentType" (change)="changetype(selectType.value)" #selectType>
                                <option value="document">Document</option>
                                <option value="video">Video</option>
                                <option value="image">Image</option>
                                <option value="audio">Audio</option>
                                <option value="url">Url</option>
                            </select>
                        </div>
                        <div class="field-item">
                            <label for="files">MULTIMEDIA FILES</label>
                            <input type="file" id="files" class="custom-file-input" (change)="handleFileInput($event.target.files)" #InputFile/>
                        </div>
                        <div class="list-files">  
                            <div class="item-file-description" *ngFor="let item of filesToUpload">
                                <p>{{item.name}}</p> 
                                <div class="dam-buttons-actions">
                                    <button  class="btn-action-transparent" title="Edit" (click)="deleteFile($event, item)">
                                        <fa-icon [icon]="faTrash"></fa-icon>
                                    </button>
                                    <button class="btn-action-transparent" title="Download">
                                        <fa-icon [icon]="faDownload"></fa-icon>
                                    </button>
                                </div>
                            </div>  
                            <div class="item-file-description" *ngFor="let item of files">
                                <p>{{item.file_name}}</p> 
                                <div class="dam-buttons-actions">
                                    <button  class="btn-action-transparent" title="Edit" (click)="deleteFile($event, item)">
                                        <fa-icon [icon]="faTrash"></fa-icon>
                                    </button>
                                    <button class="btn-action-transparent" title="Download">
                                        <fa-icon [icon]="faDownload"></fa-icon>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-form-group data" >
                    <div class="group-title">
                        <p class="title-data-info">Information</p>
                        <xdam-input-switch formControlName="active"></xdam-input-switch>
                    </div>
                    <div class="fields column">
                        <div class="field-item">
                            <label for="name">TITLE</label>
                            <input type="text" id="name" formControlName="name"/>
                        </div>
                        <div class="field-item">
                            <label for="external_url">EXTERNAL URL</label>
                            <input type="text" id="external_url" formControlName="external_url"/>
                        </div>
                        
                        <div class="field-item">
                            <label for="description">Description</label>
                            <textarea id="description" formControlName="description"></textarea>
                        </div>
                        <div class="field-item">
                            <label for="tags">Tags</label>
                            <xdam-input-categories id="tags" formControlName="tags"></xdam-input-categories>
                        </div>
                        <div class="field-item">
                            <label for="categories">Categories</label>
                            <xdam-input-categories id="categories" formControlName="categories"></xdam-input-categories>
                        </div>
                    </div>
                    
                </div>
                
            </aside>
            <div [ngSwitch]="currentType">
                <xdam-form-partial-document *ngSwitchCase="'document'" formControlName="partials" [action]="action"></xdam-form-partial-document>
                <xdam-form-partial-video *ngSwitchCase="'video'" formControlName="partials" [action]="action"></xdam-form-partial-video>
                <xdam-form-partial-video *ngSwitchCase="'image'" formControlName="partials" [action]="action"></xdam-form-partial-video>
                <xdam-form-partial-video *ngSwitchCase="'audio'" formControlName="partials" [action]="action"></xdam-form-partial-video>
            </div>
        </div>
    </div>
</form>